<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB 2024b"><title>Dealing with non available data</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 28.8px; min-height: 0px; white-space: pre-wrap; color: rgb(192, 76, 11); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: 400; text-align: left;  }
.S1 { margin: 2px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S2 { margin: 3px; border: 0.8px solid rgb(191, 191, 191); border-collapse: collapse;  }
.S3 { background-color: rgba(0, 0, 0, 0);  }
.S4 { border: 0.8px solid rgb(191, 191, 191); vertical-align: top;  }
.S5 { margin: 2px 10px 2px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: break-spaces; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S6 { margin-bottom: 20px; padding-bottom: 4px;  }
.S7 { margin: 0px; padding: 10px 0px 10px 5px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 700; text-align: start;  }
.S8 { margin: -1px 0px 0px; padding: 10px 0px 10px 7px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: start;  }
.S9 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 25px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: 700; text-align: left;  }
.CodeBlock { background-color: #F5F5F5; margin: 10px 15px 10px 0; display: inline-block }
.S10 { border-left: 0.8px solid rgb(217, 217, 217); border-right: 0.8px solid rgb(217, 217, 217); border-top: 0.8px solid rgb(217, 217, 217); border-bottom: 0px none rgb(33, 33, 33); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S11 { border-left: 0.8px solid rgb(217, 217, 217); border-right: 0.8px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 0px none rgb(33, 33, 33); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S12 { border-left: 0.8px solid rgb(217, 217, 217); border-right: 0.8px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 0.8px solid rgb(217, 217, 217); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S13 { margin: 15px 10px 5px 4px; padding: 0px; line-height: 18px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 17px; font-weight: 700; text-align: left;  }
.S14 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 18px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 17px; font-weight: 700; text-align: left;  }</style></head><body><div class = rtcContent><h1  class = 'S0' id = 'T_27B1847A' ><span>Dealing with non available data</span></h1><div  class = 'S1'><span></span></div><table  class = 'S2'><col/><tr  class = 'S3'><td  class = 'S4'><div  class = 'S5'><span>Type "</span><span style=' font-weight: bold; font-family: monospace;'>openIDexample(3)</span><span>" to open this example as a live script</span></div></td></tr></table><div  class = 'S1'><span></span></div><div  class = 'S1'><span>The normal operation of the </span><span style=' font-family: monospace;'>iterativeDisplay</span><span> is that within the loop, all the graphic functions should be called in the same order at every iteration. However, sometimes some data may not be available to the update a graphic object (and there are probably other situation in which you may want to skip a graphic function call). In that case, you should use the </span><span style=' font-family: monospace;'>skip</span><span> function.</span></div><div  class = 'S1'><span>The </span><span style=' font-family: monospace;'>skip</span><span> function simply replace a call to any functions.</span></div><div  class = 'S6'><div  class = 'S7'><span style=' font-weight: bold;'>Table of Contents</span></div><div  class = 'S8'><a href = "#H_CB8A79B3"><span>Data is available at first iteration
</span></a><a href = "#H_5C52DE0E"><span>Data is not available at first iterations
</span></a><span>    </span><a href = "#H_99FF88EE"><span>Plot empty values
</span></a><span>    </span><a href = "#H_C2F3E41D"><span>Plot NaN values</span></a></div></div><div  class = 'S1'><span></span></div><div  class = 'S1'><span></span></div><h2  class = 'S9' id = 'H_CB8A79B3' ><span>Data is available at first iteration</span></h2><div  class = 'S1'><span>In the following example, data is available at the first iteration. As a result, the </span><span style=' font-family: monospace;'>id.plot</span><span> can be used to create the graphical object. We then use </span><span style=' font-family: monospace;'>id.skip</span><span> only we do not need to plot data.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre"><span >clearvars</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >close </span><span style="color: #a709f5;">all</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >clc</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >id=iterativeDisplay;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >hFig=id.figure;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >set(hFig,</span><span style="color: #a709f5;">'visible'</span><span >,</span><span style="color: #a709f5;">'on'</span><span >); </span><span style="color: #008013;">% Undock the figure from the live editor</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >x=linspace(-10,10,20);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span style="color: #0e00ff;">for </span><span >i=1:100</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">if </span><span >i&lt;100</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.newIteration;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.finalIteration;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">if </span><span >i==1 || mod(i,10)==0</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        </span><span style="color: #008013;">% Update every 10 iterations</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.plot(x,x*0+i);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.skip(</span><span style="color: #a709f5;">'plot'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >   </span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    drawnow;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    pause(0.01)</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span style="color: #0e00ff;">end</span></span></div></div></div><h2  class = 'S9' id = 'H_5C52DE0E' ><span>Data is not available at first iterations</span></h2><div  class = 'S1'><span>In the following example, we compute the moving average of a signal over </span><span style=' font-family: monospace;'>m</span><span> samples. So the filtered value is only available after the m-th iteration. </span></div><div  class = 'S1'><span>Data is not available during the first iterations. Nevertheless, we need to plot something during the first iteration, this allows creating the graphical object to be latter updated. This first call will also set the other parameters such as color. </span></div><div  class = 'S1'><span>The solution is to plot </span><span style=' font-family: monospace;'>NaN</span><span> or empty values when no data is available.</span></div><div  class = 'S1'><span></span></div><h3  class = 'S13' id = 'H_99FF88EE' ><span>Plot empty values</span></h3><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre"><span >clearvars</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >close </span><span style="color: #a709f5;">all</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >clc</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >m=3;    </span><span style="color: #008013;">% Average windows length</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >n=100;  </span><span style="color: #008013;">% Number of samples</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >Ts=0.1; </span><span style="color: #008013;">% Sampling period</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span style="color: #008013;">% Prealocate array</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >t=(0:n-1)*Ts;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >y=sin(t*0.1);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >y_filtered=zeros(1,n);    </span><span style="color: #008013;">% Preallocate using zeros</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >id=iterativeDisplay;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >hFig=id.figure;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >set(hFig,</span><span style="color: #a709f5;">'visible'</span><span >,</span><span style="color: #a709f5;">'on'</span><span >); </span><span style="color: #008013;">% Undock the figure from the live editor</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span style="color: #0e00ff;">for </span><span >i=1:n</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">if </span><span >i&lt;n</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.newIteration;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.finalIteration;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #008013;">% Original signal</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    id.plot(t,y);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    id.hold(</span><span style="color: #a709f5;">'on'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #008013;">% Filtered signal</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">if </span><span >i&gt;m</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        y_filtered(i)=mean(y(i-m+1:i));</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.plot(t,y_filtered);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        </span><span style="color: #008013;">% Plot empty values as no data is available yet</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.plot([],[],</span><span style="color: #a709f5;">'r'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    id.grid(</span><span style="color: #a709f5;">'on'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >   </span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    drawnow;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    pause(0.01)</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span style="color: #0e00ff;">end</span></span></div></div></div><h3  class = 'S14' id = 'H_C2F3E41D' ><span>Plot NaN values</span></h3><div  class = 'S1'><span>The following code is easier and shows that if array preallocation is done using NaN values, then the code can be made simpler.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre"><span >clearvars</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >close </span><span style="color: #a709f5;">all</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >clc</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >m=3;    </span><span style="color: #008013;">% Average windows length</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >n=100;  </span><span style="color: #008013;">% Number of samples</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >Ts=0.1; </span><span style="color: #008013;">% Sampling period</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >t=(0:n-1)*Ts;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >y=sin(t*0.1);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span style="color: #008013;">% Prealocate array</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >y_filtered=NaN(1,n);    </span><span style="color: #008013;">% Preallocate using NaN</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >id=iterativeDisplay;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >hFig=id.figure;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >set(hFig,</span><span style="color: #a709f5;">'visible'</span><span >,</span><span style="color: #a709f5;">'on'</span><span >); </span><span style="color: #008013;">% Undock the figure from the live editor</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span style="color: #0e00ff;">for </span><span >i=1:n</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">if </span><span >i&lt;n</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.newIteration;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        id.finalIteration;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #008013;">% Original signal</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    id.plot(t,y);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    id.hold(</span><span style="color: #a709f5;">'on'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #008013;">% Filtered signal</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">if </span><span >i&gt;m</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >        y_filtered(i)=mean(y(i-m+1:i));</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    </span><span style="color: #0e00ff;">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    id.plot(t,y_filtered,</span><span style="color: #a709f5;">'r'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    id.grid(</span><span style="color: #a709f5;">'on'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >   </span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    drawnow;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span >    pause(0.01)</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre"><span style="color: #0e00ff;">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'>&nbsp;</div></div></div>
<br>
<!-- 
##### SOURCE BEGIN #####
%% Dealing with non available data
% 
%% 
% Type "|*openIDexample(3)*|" to open this example as a live script
%% 
% 
% 
% The normal operation of the |iterativeDisplay| is that within the loop, all 
% the graphic functions should be called in the same order at every iteration. 
% However, sometimes some data may not be available to the update a graphic object 
% (and there are probably other situation in which you may want to skip a graphic 
% function call). In that case, you should use the |skip| function.
% 
% The |skip| function simply replace a call to any functions.
%% 
% 
% 
% 
%% Data is available at first iteration
% In the following example, data is available at the first iteration. As a result, 
% the |id.plot| can be used to create the graphical object. We then use |id.skip| 
% only we do not need to plot data.

clearvars
close all
clc

id=iterativeDisplay;

hFig=id.figure;
set(hFig,'visible','on'); % Undock the figure from the live editor

x=linspace(-10,10,20);
for i=1:100
    if i<100
        id.newIteration;
    else
        id.finalIteration;
    end
    
    if i==1 || mod(i,10)==0
        % Update every 10 iterations
        id.plot(x,x*0+i);
    else
        id.skip('plot');
    end
    
   
    drawnow;
    pause(0.01)
end
%% Data is not available at first iterations
% In the following example, we compute the moving average of a signal over |m| 
% samples. So the filtered value is only available after the m-th iteration. 
% 
% Data is not available during the first iterations. Nevertheless, we need to 
% plot something during the first iteration, this allows creating the graphical 
% object to be latter updated. This first call will also set the other parameters 
% such as color. 
% 
% The solution is to plot |NaN| or empty values when no data is available.
% 
% 
% Plot empty values

clearvars
close all
clc

m=3;    % Average windows length
n=100;  % Number of samples
Ts=0.1; % Sampling period

% Prealocate array
t=(0:n-1)*Ts;
y=sin(t*0.1);
y_filtered=zeros(1,n);    % Preallocate using zeros

id=iterativeDisplay;

hFig=id.figure;
set(hFig,'visible','on'); % Undock the figure from the live editor

for i=1:n
    if i<n
        id.newIteration;
    else
        id.finalIteration;
    end

    % Original signal
    id.plot(t,y);
    id.hold('on');

    % Filtered signal
    if i>m
        y_filtered(i)=mean(y(i-m+1:i));
        id.plot(t,y_filtered);
    else
        % Plot empty values as no data is available yet
        id.plot([],[],'r');
    end
    id.grid('on');
   
    drawnow;
    pause(0.01)
end
% Plot NaN values
% The following code is easier and shows that if array preallocation is done 
% using NaN values, then the code can be made simpler.

clearvars
close all
clc

m=3;    % Average windows length
n=100;  % Number of samples
Ts=0.1; % Sampling period

t=(0:n-1)*Ts;
y=sin(t*0.1);

% Prealocate array
y_filtered=NaN(1,n);    % Preallocate using NaN

id=iterativeDisplay;

hFig=id.figure;
set(hFig,'visible','on'); % Undock the figure from the live editor

for i=1:n
    if i<n
        id.newIteration;
    else
        id.finalIteration;
    end

    % Original signal
    id.plot(t,y);
    id.hold('on');

    % Filtered signal
    if i>m
        y_filtered(i)=mean(y(i-m+1:i));
    end
    id.plot(t,y_filtered,'r');
    id.grid('on');
   
    drawnow;
    pause(0.01)
end
##### SOURCE END #####
-->
</div></body></html>